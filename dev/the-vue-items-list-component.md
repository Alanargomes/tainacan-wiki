# The Vue Items List Component

A lot can be done for adding Tainacan support to your theme using the template hierarchy logic mentioned in the section [Custom Templates](/dev/custom-templates.md). While this might be enough you may be interested in tweaking a bit more of the appearance of the most complex page that Tainacan offers to you: **The Items List Page**. It turns out that its content works in a much different strategy, which we will explain ahead.

## The *tainacan_the_faceted_search()* magic

While most of the [helper functions](/dev/custom-templates#theme-helper-functions) mentioned use `php` functions to get data from the server-side and prepare HTML content to be displayed for the user, one seems to be doing more than that, and that is the `tainacan_the_faceted_search()` method. Let us use it in our child theme of  [TwentyTwenty](https://wordpress.org/themes/twentytwenty/) to see how an Items list is rendered:

```php
/**
 * /tainacan/archive-items.php
 *
 * Custom implementation of Tainacan collection items list
 */
<?php get_header(); ?>
    // ... Load custom header, if desired, probably displaying a collection banner
    <?php tainacan_the_faceted_search(); ?>
    // .. Load custom footer, if desired
<?php get_footer(); ?>
```

That alone gives us the following once we get into a collection items page:

![Template added to the items list page.](/_assets/images/the-vue-items-list-component-1.png)

Seems to be a lot more than the simple `<main id='tainacan-items-page' $props ></main>` returned at the [end of the Template Tags source code function](https://github.com/tainacan/tainacan/blob/4cbc0b21e660a4a667d784bcb3a353e54f59d1f2/src/theme-helper/template-tags.php#L210 ':ignore'), right? 

> That is because **the items list is a client-side interface, generated by [Vue.js](vuejs.org/ ':ignore')** and Javascript code. It takes advantage of most of the code used by the plugin to render the same list on the *admin panel*, to provide a rich faceted search interface. It is also a great demonstration of what can be done consuming [Tainacan JSON API](https://tainacan.org/api-docs/ ':ignore'), as it uses the API for REST calls every time an update is necessary on the component. 

Nevertheless, as you might have noticed, *not everything is perfect*, there are some css adjustments that might be necessary because of how the parent theme deals with fonts.

### The Vue component logic

As a theme developer, you don't need to learn Vue to use this interface, but it is important to see how it works if you want to customize it, especially its css. The diagram below shall help us in this mission:

![The Vue component architecture for the Faceted Search.](/_assets/images/the-vue-items-list-component-2.png)

The [ThemeSearch]() Vue component is a container that holds all the components seen on the figure. It receives "props", which are the information passed to the `main` tag generated by `tainacan_the_faceted_search()`. Those props are essential for rendering the rest:

* The `collection-id` for the collection items list;
* The `term-id` and `taxonomy` for the term items list;
* The `default-view-mode` and the `enabled-view-modes` array to inform to the items list which view modes should be available according to the Collection settings;

Once aware of these variables, the component is built and the EventBus, responsible for managing the URL route and queries, will generate a long list of params and pass them to the page URL. There is numerous information to be loaded in this first moment, from different sources, represented on the diagram by the "Store Modules". To name a few:

* The **filters** of the collection are requested to the API and the result is stored at the Filters Module, which is consulted by the [FiltersItemsList]() component;
* The **metadata** of the collection are requested to the API and the result is stored at the Metadata Module, which is consulted by the parent ThemeSearch component. This information is used in companion to the props to build elements as the "Displayed Metadata Dropdown" and "View Mode". It also informs to the Event But which item metadata should be fetched;
* The **items** themselves are fetch from the API and served as props to the **ItemsList** component, which can be either a Vue component from the plugin or an HTML template registered as [Extra View Mode](/dev/extra-view-modes.md).
* Other information may be also provided to the component via the `tainacan_plugin` global variable available to the plugin. It stores mainly information relative to the user preference if he or she is logged. For example, a user may have set the "number of items per page" to be 96 instead of 12.

All of this is kept in sync with the URL by the EventBus, to guarantee that if a user copies the link and paste it on another browser, everything is loaded properly. The communication of the components is necessary for details such as updating the facets once the item list is reloaded or a filter applied.

### The Vue component file structure

Now that you have a bigger picture, we can take a look at where is the source code of each part of the list, so that if you need to change CSS for example, you can see where to look for class definitions. The file tree bellow contains only the elements that are in somehow imported to the ThemeSearch bundle - other files related to the admin panel are hidden for simplicity:

```
/src/views
    ├── admin
    │   ├── components
    │   │   ├── filter-types
    │   │   │   ├── autocomplete
    │   │   │   │   ├── Autocomplete.vue
    │   │   │   │   └── class-tainacan-autocomplete.php
    │   │   │   ├── checkbox
    │   │   │   │   ├── Checkbox.vue
    │   │   │   │   └── class-tainacan-checkbox.php
    │   │   │   ├── date
    │   │   │   │   ├── class-tainacan-date.php
    │   │   │   │   └── Date.vue
    │   │   │   ├── date-interval
    │   │   │   │   ├── class-tainacan-date-interval.php
    │   │   │   │   └── DateInterval.vue
    │   │   │   ├── filter-type
    │   │   │   │   └── class-tainacan-filter-type.php
    │   │   │   ├── numeric
    │   │   │   │   ├── class-tainacan-numeric.php
    │   │   │   │   └── Numeric.vue
    │   │   │   ├── numeric-interval
    │   │   │   │   ├── class-tainacan-numeric-interval.php
    │   │   │   │   └── NumericInterval.vue
    │   │   │   ├── numeric-list-interval
    │   │   │   │   ├── class-tainacan-numeric-list-interval.php
    │   │   │   │   └── NumericListInterval.vue
    │   │   │   ├── selectbox
    │   │   │   │   ├── class-tainacan-selectbox.php
    │   │   │   │   └── Selectbox.vue
    │   │   │   ├── taginput
    │   │   │   │   ├── class-tainacan-taginput.php
    │   │   │   │   └── Taginput.vue
    │   │   │   ├── tainacan-filter-item.vue
    │   │   │   └── taxonomy
    │   │   │       ├── Checkbox.vue
    │   │   │       ├── class-tainacan-taxonomycheckbox.php
    │   │   │       ├── class-tainacan-taxonomytaginput.php
    │   │   │       └── Taginput.vue
    │   │   ├── modals
    │   │   │   ├── checkbox-radio-modal.vue
    │   │   │   └── exposers-modal.vue
    │   │   ├── other
    │   │   │   └── collection-filter.vue
    │   │   └── search
    │   │       ├── advanced-search.vue
    │   │       ├── filters-items-list.vue
    │   │       ├── filters-tags-list.vue
    │   │       └── pagination.vue
    │   ├── js
    │   │   ├── axios.js
    │   │   ├── event-bus-search.js
    │   │   ├── filter-types-mixin.js
    │   │   ├── mixins.js
    │   │   ├── store
    │   │   │   ├── modules
    │   │   │   │   ├── collection
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   ├── exposer
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   ├── filter
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   ├── item
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   ├── metadata
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   ├── search
    │   │   │   │   │   ├── actions.js
    │   │   │   │   │   ├── getters.js
    │   │   │   │   │   ├── index.js
    │   │   │   │   │   └── mutations.js
    │   │   │   │   └── taxonomy
    │   │   │   │       ├── actions.js
    │   │   │   │       ├── getters.js
    │   │   │   │       ├── index.js
    │   │   │   │       └── mutations.js
    │   │   │   └── store.js
    │   │   ├── utilities.js
    │   └── scss
    │       ├── _buttons.scss
    │       ├── _checkboxes.scss
    │       ├── _dropdown-and-autocomplete.scss
    │       ├── _filters-menu-modal.scss
    │       ├── _inputs.scss
    │       ├── _modals.scss
    │       ├── _notices.scss
    │       ├── _pagination.scss
    │       ├── _radios.scss
    │       ├── _repository-level-overrides.scss
    │       ├── _selects.scss
    │       ├── _switches.scss
    │       ├── _tables.scss
    │       ├── _tabs.scss
    │       ├── _tags.scss
    │       ├── _tainacan-form.scss
    │       ├── _tooltips.scss
    │       ├── _variables.scss
    │       ├── _view-mode-cards.scss
    │       ├── _view-mode-grid.scss
    │       ├── _view-mode-masonry.scss
    │       └── _view-mode-records.scss
    └── theme-search
        ├── components
        │   ├── circular-counter.vue
        │   ├── view-mode-cards.vue
        │   ├── view-mode-masonry.vue
        │   ├── view-mode-records.vue
        │   ├── view-mode-slideshow.vue
        │   └── view-mode-table.vue
        ├── js
        │   ├── theme-main.js
        │   └── theme-router.js
        ├── pages
        │   └── theme-items-page.vue
        ├── scss
        │   ├── theme-basics.sass
        │   └── _view-mode-slideshow.scss
        └── theme-search.vue
```

As you can see, there is a similar structure on both `/src/view/theme-search` and `/src/view/admin` folders, but the last one is considerably more complex. The stuff that is used by both is always inside "admin" as it is the main "module" of the plugin. Because of that, if you want to override any css class, for example, you will probably find its definition inside `/src/view/admin/scss/`. But Vue components have a particularity of allowing `scoped css` inside their code, which means you may find what you are looking for inside one of the `.vue` files across the code as well.

### CSS Customizations to the Vue component

So here are a few examples of customizations that you can do, now that you understand more of the Items list component:

1. __Hide or change the order of elements__. Let us suppose that you wish to tweak the *pagination* section a bit. You don't want the "Items per Page select" to appear and the "Go to Page" select should probably be after the pagination links. A look into the Pagination [component](https://github.com/tainacan/tainacan/blob/4cbc0b21e660a4a667d784bcb3a353e54f59d1f2/src/admin/components/search/pagination.vue ':ignore') and [scss](https://github.com/tainacan/tainacan/blob/4cbc0b21e660a4a667d784bcb3a353e54f59d1f2/src/admin/scss/_pagination.scss ':ignore') may give us a hint on what do do:
    ```css
    /* Hide this one, please */
    .pagination-area .items-per-page:not(.go-to-page) {
        display: none;
        visibility: hidden;
    }
    /* Move this to end of .pagination-area */
    .pagination-area .go-to-page {
        order: 2;
    }
    ```
2. __Increase the font size of some element__. *Tainacan Interface* font sizes are rather small due to its formal styling, but you can tweak that too looking for *font-size* definitions of your elements. Here are some adjustments made to Items list Search Control (the region where the Sorting option and View Mode selection are available). We may find definitions that affect this [here](), [here]() and [here]():
    ```css
    /* This shall increase labels */
    .search-control-item .label {
        font-size: 1.5rem;
    }
    /* This will make dropdown buttons and other buttons bigger*/
    .button:not(.is-small):not(.is-medium):not(.is-large) {
        font-size: 1.5rem !important;
    }
    /* This one is for dropdown list items */
    .dropdown .dropdown-menu .dropdown-content .dropdown-item {
        font-size: 1.25rem;
    }
    /* Finally, for the icon font */
    .theme-items-list .search-control .gray-icon i::before, 
    .theme-items-list .search-control .gray-icon .icon i::before {
        font-size: 1.5rem;
    }
    ```
    Of course, you need to take care of margins and paddings here too, depending on how much you are changing these values;
3. __Ajust the list container according to site margin__. In many themes, a page has a lateral margin, that keeps content inside a container of a certain `max-width`, which can leave the items list a bit...tight. The best way to handle this is to have a [Custom Template](/dev/custom-templates.md) for the items list that provides proper container classes for the list section. If you are not able to do that, you can still solve it with negative margins and a bit of work:
    ```css
    /* Replace $max-width by your container max-width. Remember that it may change according to the screen size, which can be adapted with media queries. /*
    /* The items list container */
    .theme-items-list {
        width: 100%;
        margin-left: calc( - (100vw - $max-width) / 2);
        margin-right: calc( - (100vw - $max-width) / 2);
    }
    ```
4. __Change width of filters list__. Here is a more tricky one. Because of its scroll logic, the `#filters-desktop-aside` element has a position absolute (you can check this [here]()). This means that changing its width will alson require an adjustment to `#items-list-area`, which is right aside it:
    ```css
    #filters-desktop-aside {
        min-width: 15%;
        width: 15%;
    }
    #items-list-area {
        margin-left: 15%;
    }
    ```
    We use the *id* `#filters-desktop-aside` instead of the *class* `.filters-menu` because that would also affect the filters modal that appear on the mobile version.

After applying some of the suggestions mentioned, our items list looks a lot better on the TwentyTwenty child theme:

![TwentyTwenty items list page with css fixes.](/_assets/images/the-vue-items-list-component-3.png)